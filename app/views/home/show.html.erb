<div id="transfer_form">
  <%= form_for @entry, html: {class: "form", role: "form"} do |f| %>

    <div class='double-transfer-boundary'>
      <div class='item-container center-block transfer-left'>
        <h2>1. Send Bitcoin</h2>
        <% if @entry.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@entry.errors.count, "error") %> prohibited this entry from being saved:</h2>
            <ul>
            <% @entry.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
            </ul>
          </div>
        <% end %>

        <div class="wrapper">
          <%= f.text_field :recipient, class: "form-control", placeholder: 'mzMfmZBhf16dqYncB16R3Fgh3SEdxtYWSw' %>
        </div>

        <br>

        <div class="wrapper">
          <%= f.number_field :total, min: 0.00, step: 0.00001, class: "form-control", placeholder: '0.000000000 BTC' %>
          <%= f.hidden_field :sender, value: @user.btc_address %>
        </div>

        <br>

        <span class='glyphicon glyphicon-arrow-right btn-lg' />

      </div>

      <div class='item-container center-block transfer-right'>
        <h2>2. Pick a non-profit</h2>
        <% if @entry.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@entry.errors.count, "error") %> prohibited this entry from being saved:</h2>
            <ul>
            <% @entry.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
            </ul>
          </div>
        <% end %>

        <div class="wrapper">
          <%= f.select :charity_id, options_for_select(@charities.map{|m| [m.name, m.id]}), {include_blank: "Select a Charity"}, {class: "form-control"} %>
        </div>

        <div id="wrapper_last_line" class="form-group text-center">
          <%= f.check_box :terms %> <%= link_to 'I accept the terms', terms_path %><br><br>
          <%= f.submit "DO THIS!", class: "btn btn-success btn-lg" %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div id="entries_feed" class="">
  <%= render 'slideshow' %>
</div>

<div id="winners" class="">
  <div class='item-container center-block'>
    <h2>Latest Winners</h2>
    <ol>
      <% @entries.each do |entry| %>
        <li><%= entry.sender %></li>
      <% end %>
    </ol>
  </div>
</div>

<% if session[:new_transfer] %>
  <% session.delete :new_transfer %>
  <div class="echocoin-modal modal fade" id="memberModal" tabindex="-1" role="dialog" aria-labelledby="memberModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div style="background-color: #999;" class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="memberModalLabel">Notice</h4>
        </div>

        <div class="modal-body">
           <p>This is where you would scan the QR code below with your bitcoin wallet software to create a bitcoin transaction.</p>
           <p>For this demo, we'll go ahead and enter you into the prize drawing and pretend that's what happened once you click close.</p>
           <%= image_tag("sample_qr.png") %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
<% end %>

<% if @new_user %>
  <div class="echocoin-modal modal fade" id="memberModal" tabindex="-1" role="dialog" aria-labelledby="memberModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div style="background-color: #999;" class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="memberModalLabel">Welcome new Echocoin user!</h4>
        </div>

        <div class="modal-body">
          <p>
            During the Rails Rumble, this site does not use real bitcoins and is operating in a simulation mode.
          </p>

          <p>
            You will be able to simulate sending bitcoin to other users of the site
            by selecting a bitcoin address from a dropdown menu.

            Therefore, we are assigning you this test bitcoin address for use during judging.
          </p>

          <div class="bitcoin_address">
            <%= @user.btc_address %>
          </div>

          <p>
            This will display in the upper right as your user id. Other users of the site can send you
            bitcoin and any prize pools that you win will be paid to this address.
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
<% end %>
