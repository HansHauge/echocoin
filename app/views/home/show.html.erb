<div class="container">
  <div class="row">
    <div class="col-md-4">
      <div id="prize_pools">
        <h2>Current Prize Pools</h2>
        <ol>
          <% @prize_pools.each do |prize_pool| %>
            <li><%= "#{prize_pool.name} | #{prize_pool.total}" %> BTC</li>
          <% end %>
        </ol>
      </div>
    </div>

    <div class="col-md-4">
      <div id="transfer_form">
        <h2>Send Bitcoins</h2>
        <%= form_for @entry, html: {class: "form-horizontal", role: "form"} do |f| %>
          <% if @entry.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@entry.errors.count, "error") %> prohibited this entry from being saved:</h2>

              <ul>
              <% @entry.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
              </ul>
            </div>
          <% end %>
          <div class="form-group">
            <%= f.label :recipient %>
            <%= f.select(:recipient, options_for_select(@users.map(&:btc_address)), class: "form-control") %>
          </div>

          <div class="form-group">
            <%= f.label :total %>
            <%= f.number_field :total, min: 0.00, step: 0.00001, class: "form-control" %>
          </div>
          <%= f.check_box :terms %> <%= link_to 'I accept the terms', terms_path %><br><br>
          <%= f.hidden_field :sender, value: @user.btc_address %>
          <%= f.submit "Send", class: "btn btn-default" %>

        <h3>Pick a charity</h3>

        <% @charities.each do |charity| %>
          <label>
            <%#= f.radio_button(:charity, charity.name, checked=(charity.name.eql?("Trump for President"))) %>
            <%= f.radio_button("charity_id", charity.id) %>
            <%= charity.name %>
          </label>
          <br>
        <% end %>
        <% end %>
      </div>
    </div>

    <div class="col-md-4">
      <div id ="entries_feed">
        <h2>Charity Donations to Date</h2>
        <ol>
          <% @charities.each do |charity| %>
            <li><%= "#{charity.name} | #{charity.get_balance}" %> BTC</li>
          <% end %>
        </ol>

        <h2>Latest Winners</h2>
        <ol>
          <% @users.each do |user| %>
            <li><%= user.name %></li>
          <% end %>
        </ol>
      </div>
    </div>
  </div>

  <% if @new_transfer %>
    <div id="transfer_instructions">
      <p>This is where you would scan the QR code below with your bitcoin wallet software to create a bitcoin transaction.</p>
      <%= image_tag("sample_qr.png") %>
      <div id="close" class="button">Close</div>
    </div>
  <% end %>
</div>

<% if @new_user %>
  <div id="welcome_user" class="will_be_modal" style="border: 2px solid red; padding: 1rem;">
    <h1>Welcome new Echocoin user!</h1>

    <p>
      During the Rails Rumble, this site does not use real bitcoins and is operating in a simulation mode.
    </p>

    <p>
      You will be able to simulate sending bitcoin to other users of the site
      by selecting a bitcoin address from a dropdown menu.

      Therefore, we are assigning you this test bitcoin address for use during judging.
    </p>

    <div class="bitcoin_address">
      <%= @user.btc_address %>
    </div>

    <p>
      This will display in the upper right as your user id. Other users of the site can send you
      bitcoin and any prize pools that you win will be paid to this address.
    </p>
  </div>
<% end %>
